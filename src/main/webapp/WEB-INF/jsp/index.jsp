<%--
  User: acane
  Date: 2023/11/25
  --%>
<%@ page contentType="text/html;charset=UTF-8" language="java" isELIgnored="false" %>
<%
    String path = request.getContextPath();
    String basePath = request.getScheme() + "://" + request.getServerName() + ":" + request.getServerPort() + path + "/";
%>
<html>
<head>
    <title>Title</title>
    <base href="<%=basePath%>">
    <script src="https://www.layuicdn.com/auto/layui.js" v="2.8.0"></script>
    <link rel="stylesheet" type="text/css" href="https://www.layuicdn.com/layui-v2.8.0/css/layui.css"/>
</head>
<style>
    body {
        background-color: rebeccapurple;
    }

    .announcement {
        position: relative;
    }

    .announcement > div > p {
        font-size: 30px;
        font-family: 幼圆;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
    }

    .outer-container {
        background-color: coral;
        width: 70%;
        height: 150px; /* 设置外部容器高度为150px */
        margin: 0 auto;
    }

    .container {
        display: flex;
        height: 100%; /* 使内部容器填充整个外部容器 */
        box-sizing: border-box;
    }

    .avatar, .info {
        border: 2px solid black;
        box-sizing: border-box;
        text-align: center;
        vertical-align: top;
    }

    .avatar-container {
        flex: 1 1 20%;
        height: 100%; /* 适应外部容器的高度 */
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        overflow: hidden; /* 防止内容溢出div */
    }

    .avatar {
        max-width: 100%; /* 限制图片最大宽度 */
        max-height: 80%; /* 调整图片最大高度，为用户名留出空间 */
        object-fit: cover; /* 保持图片的宽高比 */
    }

    .username {
        font-size: 12px; /* 调整用户名字体大小 */
        margin-top: 5px; /* 在用户名和头像之间添加一些间距 */
    }


    .middle-container {
        flex: 1 1 60%;
        display: flex;
        flex-direction: column;
        height: 100%; /* 适应外部容器的高度 */
        box-sizing: border-box;
    }

    .title, .content {
        border: 2px solid black;
        box-sizing: border-box;
    }

    .title {
        font-weight: bold;
        font-size: 20px; /* 调整标题字体大小 */
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .content {
        flex-grow: 1;
        text-align: left;
        font-size: 15px; /* 调整内容字体大小 */
    }

    .info {
        flex: 1 1 20%;
        height: 100%;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
    }
</style>
<body>
<%--导航栏--%>
<div class="layui-header header">
    <%--居左--%>
    <ul class="layui-nav layui-bg-blue" lay-bar="disabled">
        <%--logo--%>
        <li class="layui-nav-item">
            <%--跳转到首页--%>
            <a href="">
                <svg style="width: 100%;height: 100%" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 354.29 51.13">
                    <g id="レイヤー_2" data-name="レイヤー 2">
                        <g id="レイヤー_1-2" data-name="レイヤー 1">
                            <polygon
                                    points="252.4 22.52 252.4 18.81 252.4 15.76 251.02 14.35 249.74 15.66 249.74 20.52 249.79 23.64 249.71 23.71 237.94 35.49 237.94 34.75 238.03 34.66 238.03 32.42 242.66 27.79 242.77 27.79 242.77 27.68 242.77 21.78 242.77 15.52 244.38 15.52 244.38 9.55 231.68 9.55 231.68 15.52 236.79 15.52 236.79 27.26 233.58 30.47 233.51 30.47 233.51 30.58 233.42 30.58 233.42 39.61 233.65 39.62 236.56 42.52 252.4 26.69 252.4 22.52"></polygon>
                            <polygon
                                    points="255.46 19.33 255.46 19.33 255.46 18.14 255.46 18.15 255.46 15.28 260.97 15.28 260.97 9.3 248.27 9.3 248.27 14.62 248.27 15.25 248.27 15.28 248.27 16.42 248.27 19.33 248.27 24.42 249.26 23.42 249.2 19.33 249.2 15.47 251.02 13.6 252.92 15.54 252.92 19.33 252.92 26.91 248.27 31.56 248.27 47.88 248.3 47.88 255.44 47.88 255.46 47.88 255.46 47.85 262.46 40.85 262.46 33.71 255.46 40.71 255.46 19.33"></polygon>
                            <polygon
                                    points="270.68 30.68 274.98 27.79 274.98 24.28 274.32 24.61 274.32 10.62 272.25 10.62 268.84 10.62 263.64 10.62 263.64 20.55 268.84 20.55 268.84 23.9 263.64 27.43 263.64 31.36 263.64 31.57 263.64 33.55 263.64 35.08 263.64 35.84 263.64 40.99 263.64 42.98 270.64 36.27 270.68 30.68"></polygon>
                            <polygon
                                    points="222.13 29.34 230 21.48 230.05 21.48 230.05 21.43 230.05 14.27 229.26 14.27 229.26 18.6 228.96 18.6 225.52 22.05 225.51 22.04 219.25 22.04 214.93 26.36 214.93 36.55 214.93 48.15 222.13 48.15 232.59 42.11 232.59 33.79 222.13 39.83 222.13 29.34"></polygon>
                            <path d="M198.63,43.2v-.52h6.6l-2-2h-7.84l-4.67-8.08,4.14-4.14h16.41c-.11-.29-.21-.58-.32-.88a25,25,0,0,1-1.09-5c-.09-.79-.15-1.59-.17-2.42,0-.28,0-.56,0-.85s0-.65,0-1h-3.23l3.51-3.42h-1V10.1h-28.9V10l-4.14,4,4.14,4V18h22.48v4.5H184.81l-2.09,2.09-3.8,3.8-.13.13,5.82,10.07,3,5.18,2.51,4.35h23.4l-4.95-4.95Z"></path>
                            <polygon
                                    points="218.54 21.52 220.94 21.52 225.25 21.52 225.26 21.52 225.26 21.5 228.67 18.09 228.71 18.09 228.71 18.05 228.71 13.74 228.71 10.99 217.37 10.99 217.37 18.09 218.45 18.09 218.54 18.09 219.34 18.09 224.36 18.09 223.57 18.88 219.34 18.88 218.54 18.88 217.64 18.88 214.95 21.52 217.96 21.52 218.54 21.52"></polygon>
                            <polygon
                                    points="216.85 10.47 220.58 10.47 220.58 7.51 209.5 7.51 209.5 14.35 216.85 14.35 216.85 10.47"></polygon>
                            <polygon
                                    points="344 24.1 342.76 24.1 338.6 24.1 338.6 28.26 338.6 31.38 338.72 31.38 338.71 31.38 341.89 32.39 341.89 32.39 342.07 32.45 342.24 32.5 342.24 40.21 341.72 40.21 341.72 36.37 333.8 36.37 332.7 33.87 335.05 33.87 333.63 30.66 327.54 30.66 327.54 30.14 331.05 30.14 330.13 28.06 327.38 21.83 316.23 21.83 316.23 21.31 319.07 21.31 324.96 15.38 342.32 15.42 342.32 15.58 342.41 15.58 342.41 9.2 322.2 9.2 316.32 15.13 316.32 10.07 316.32 6.54 309.41 6.54 303.81 6.54 303.81 8.07 310.25 8.07 310.25 33.16 308.17 34.8 308.17 45.24 312.96 45.24 317.56 45.24 317.62 45.24 322.02 34.96 322.55 33.55 321.18 30.83 318.41 32.46 317.36 34.96 315.8 38.6 311.09 38.6 315.73 28.06 323.16 28.06 329.64 42.74 329.67 42.73 329.67 42.74 342.07 42.74 346.23 42.74 346.23 42.74 346.23 33.76 346.23 30.7 346.23 30.68 346.18 30.68 342.76 29.6 342.76 28.26 346.63 28.26 352.16 28.26 354.29 26.18 352.16 24.1 346.63 24.1 344 24.1"></polygon>
                            <path d="M309.73,8.6H282.58l-2.5,4.83-4.57,8.86v17h6.64v-.18l7.53-6,6.82-5.36V15.05h6.23V29.92l-13,10.38H268.23l-2,1.91,3.58,3.5h23.6L309.73,32.9ZM289.68,24.34l-7.36,5.9v1.07h-.52V24.39h.52v1.25l3.32-2.46V12.68l-1.09-1.11-1.08,1.11V21H283V12.45l1.59-1.63,4.13,4.23h1Z"></path>
                            <polygon
                                    points="207.72 17.77 216.85 17.77 216.85 14.62 215.81 15.66 211.13 15.66 210.41 15.66 209.88 15.66 207.72 17.77"></polygon>
                            <polygon
                                    points="103.43 50.97 105.35 49.1 102.73 46.55 101.07 48.16 99.08 48.16 98.62 48.16 92.68 48.16 95.49 50.97 100.06 50.97 100.06 50.97 102.17 50.96 102.17 50.97 103.43 50.97"></polygon>
                            <polygon
                                    points="99.81 43.51 99.61 43.51 99.08 43.51 98.22 43.51 87.91 43.51 87.91 43.52 87.43 43.52 82.83 43.52 82.83 43.51 79.5 46.84 74.79 46.84 74.79 50.97 81.08 50.97 84.4 47.64 98.31 47.64 99.61 47.64 100.86 47.64 102.79 45.76 100.48 43.51 99.81 43.51"></polygon>
                            <polygon
                                    points="40.73 9.2 38.56 11.33 41.42 11.33 42.3 11.33 43.81 11.33 48.22 6.93 48.29 6.93 48.29 5.35 41.19 5.35 41.19 4.29 49.34 4.29 49.34 8.4 45.87 12.23 45.87 12.43 44.14 12.43 41.99 14.54 44.86 14.54 45.73 14.54 47.09 14.54 47.09 11.29 51.44 11.29 51.72 10.97 51.72 4.29 51.72 2.67 51.72 1.91 41.19 1.91 38.81 1.91 38.81 4.29 38.81 5.35 38.81 6.93 41.19 6.93 44.57 6.93 42.3 9.2 40.73 9.2"></polygon>
                            <path d="M13.14,45.54l.37.37-5,5h11.7l8.2-8.2-.22.24,1-.85V35.69H37.4V24.91c0-3.11,2.17-5.08,4-5.08V12.16H37.57v3.47h-.52V8.34H29.73v3.82H16.86c-3.1,0-5.07-3.55-5.07-5.4h-5V23H4.27L0,25.61H11.79V19.83h9.42L10.94,30.11h0v8.65h9.36L17.9,41.13h2.22v.52H14.76L8.47,47.94h2.27ZM17.7,31.08,29,19.83h.77V31.08Z"></path>
                            <path d="M47.61,20.07H48.8v-2C52,18.1,55,23.67,56,25.67l-5.5,4.89V46.84h-3v4.29H70.92L73.11,49l-2.2-2.14H57.5V33.33l15.35-13,.26-.22V10.43l-10.23,9.1c-1.51-3.31-4.62-6.54-7.66-7.72H47.61Z"></path>
                            <path d="M172.78,40.92H164.3V36h8.89V30.34a9.51,9.51,0,0,0,5.4-8.59,9.65,9.65,0,0,0-1.31-4.81h-6.06l-2.74,2.67v.09h6a7,7,0,0,1,.31,2.05,8,8,0,0,1-1.6,5.16V20.69H159.73V18.84H167l-2.76-2.76L153.57,5.43l-1.14-1.14-.4-.4-2.76-2.76H146.9c0,1.93-2.21,3.16-3.37,3.16h-8V0h-9.11V4.29H131l-2.52,2.47L131,9.23h-2v2.53h6V9.23h16.05l2.39,3.17v8.29h-1.77v-5a4.87,4.87,0,0,0-4.87-4.88H137.1v2.73H123.75l-9.3-9.29-4.14,4.15,5.14,5.14h-10.3v3.15h-2.29v.46h2.29v2.26H137.1v2.7l5.57-5.44h3.15v.11H146v6.73h-.52V20.69h-5.53V36H141v0h.5A8.2,8.2,0,0,1,134,40.9h-.43a10.19,10.19,0,0,0,4,1.24l1.72-1.76,1.53,1.57a10.45,10.45,0,0,0,7.33-6h2.49V43.4h2.1v.52h-7v7.21h14.63V49.21H165l-2.12-2.08h-6.41V36H160v.68c-.07,1.37-.37,4.27-1.73,4.27v4.5h19.15ZM153.45,30h-7.61V26.69h7.61Zm.48-17.82v-.07l.07.07Zm6,17.82v3.53h-.52v-6.8h7.9V30Z"></path>
                            <polygon
                                    points="79.48 8.4 80.82 8.4 87.18 8.4 92.92 8.4 93 8.32 93.28 8.01 93.28 5.25 89.92 5.25 89.47 5.25 88.2 5.25 87.04 4.12 80.82 4.12 79.48 4.12 76.92 4.12 75.3 4.12 73.11 6.26 75.3 8.4 79.48 8.4"></polygon>
                            <path d="M94.76,4.72h2L93.38,8.68,91.19,10.8H73.83v5.5H84.91v1H79L74.58,27.64l1.87,4.84,0,0,2.55,5.39h23.49l-4.28-9.74.21-.47,3.47-8.2h2.69V17.65H94V16.14h10.64V10.43H98.72L102.82,6,99.06,2.26H88.4L87.13,3.49,88.4,4.72ZM80.82,27.64l.24-.57H92.47l-.24.57.24.57H81.06Zm2.43,5.74-.48-1.13H94.19l.48,1.13ZM94.67,21.9,94.19,23H82.77l.48-1.13Z"></path>
                            <polygon points="113.73 39.45 113.75 39.51 113.77 39.49 113.73 39.45"></polygon>
                            <path d="M31,48.25h-.9l-1.35,1.31,1.35,1.32H38l7.15-7.16A8.19,8.19,0,0,1,50,42V36.21H29.75V42H42.57L36.3,48.25Z"></path>
                            <polygon
                                    points="58.02 35.85 58.02 41.98 59.53 41.98 61.64 41.98 64.79 38.91 61.65 35.85 59.53 35.85 58.02 35.85"></polygon>
                            <path d="M123.19,20.38H117l-6.8,9.34h1.48l-2.17,3V26.21l4.34-5.83h-6.07l-4.4,5.67-2.23,2.87v4.3h-.08l3.27,7.42-.48.21-1.09-2.48h-24l-2.31-4.88h-7.5l2.91,6.87-.48.21-1.4-3.32h-2l2.35,5.26h41.47l-3.64-8.66h-1.86v-.52h2.2l1.77,4.2,5.57-7.66h-1.4v-.52h2.32l.92-1.28h5.1v2l-1.86,2.55h-4.39l-2.69,2.62,2.69,2.63h2.32L113,45.71h-6.59l-1.9,1.85,1.59,1.54-.72.7.94.92H114l5.19-7.06.42.31-3,4.08h1.55l5-7.13h-1.71l2.27-3.09h.2v8.49h2.41v4.53h13.79V45h0V42.09l-.94-1-1.09,1.11v5.94h-6.62V42H129V37.83h8.14V22.08H122ZM129.48,30v-2h3v4.51h-4.87Z"></path>
                        </g>
                    </g>
                </svg>
            </a>
        </li>
        <%--搜索--%>
        <li class="layui-nav-item">
            <label>
                <input type="text" placeholder="搜索帖子" value="" class="layui-input">
            </label>
        </li>
    </ul>
    <%--居右--%>
    <ul class="layui-nav layui-layout-right layui-bg-green" style="white-space: nowrap;!important;">
        <%--用户信息--%>
        <li class="layui-nav-item">
            <a href="">消息<span class="layui-bg-red">114514</span></a>
        </li>
        <%--头像--%>
        <li class="layui-nav-item" lay-unselect="">
            <%--头像--%>
            <a href="javascript:;"><img class="layui-nav-img" src="img/default-avatar.png"></a>
            <dl class="layui-nav-child">
                <dd style="text-align: center;"><a href="">退出</a></dd>
            </dl>
        </li>
    </ul>
</div>

<%--轮播公告，点击显示详情，admin发帖子就是发公告--%>
<div class="layui-carousel layui-layout-center" id="announcement" style="margin:0 auto">
    <div carousel-item="" class="announcement">
        <%--循环--%>
        <div style="background-color: hotpink"><p>美国卡内基梅隆大学开设《原神》研究课程：考试要在 2 分钟内击败 BOSS</p>
        </div>
        <div style="background-color: hotpink"><p>美国核反应堆实验室遭到黑客攻击，被要求制造“猫娘”</p></div>
    </div>
</div>

<%--帖子信息流--%>
<div>
    <ul class="flow-default" id="PostList"></ul>
</div>


<script>
    layui.use('flow', function () {
        var flow = layui.flow;
        var carousel = layui.carousel;

        /*帖子信息流*/
        flow.load({
            elem: '#PostList' //流加载容器
            , done: function (page, next) { //下一页的回调
                setTimeout(function () {
                    var lis = [];
                    // 循环加载帖子
                    for (var i = 0; i < 3; i++) {

                        lis.push(
                            '<li style="text-align: center ;margin-top: 5px">' +
                            /*帖子*/
                            '<div class="outer-container">' +
                            '<div class="container">' +
                            '<div class="avatar-container">' +
                            '<img src="img/default-avatar.png" class="avatar" alt="用户头像"> ' +
                            '<div class="username">用户名</div> ' +
                            '</div> ' +
                            '<div class="middle-container"> ' +
                            '<div class="title">标题 : ' + ((page - 1) * 5 + i + 1) + '</div>' +
                            ' <div class="content"> ' +
                            '<p>这是正文内容</p> ' +
                            '</div> ' +
                            '</div> ' +
                            '<div class="info">' +
                            '<p>[回帖数] 人回帖 &#9; [收藏数] 人收藏</p>' +
                            '<p>发帖时间</p>' +
                            '</div>' +
                            '</div>' +
                            '</div>'
                            + '</li>'
                        )
                    }
                    //执行下一页渲染，第二参数为：满足“加载更多”的条件，即后面仍有分页
                    //pages为Ajax返回的总页数，只有当前页小于总页数的情况下，才会继续出现加载更多
                    next(lis.join(''), page < 4); //假设总页数为 4
                }, 500);
            }
        });

        /*轮播公告*/
        carousel.render({
            elem: '#announcement'
            , interval: 5000
            , anim: 'fade'
            , height: '200px'
            , width: '70%'
        });
    });


</script>
</body>
</html>
